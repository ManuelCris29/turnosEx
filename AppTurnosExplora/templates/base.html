<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}AppTurnos{% endblock %}</title>

    <!-- Google Font: Source Sans Pro -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="/static/plugins/fontawesome-free/css/all.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="/static/css/adminlte.min.css">
    <!-- SweetAlert2 -->
    <link rel="stylesheet" href="/static/plugins/sweetalert2/sweetalert2.min.css">
    <!-- Custom SweetAlert Styles -->
    <style>
        .swal2-popup {
            font-size: 0.9rem !important;
            border-radius: 15px !important;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3) !important;
        }
        
        .swal2-title {
            font-size: 1.5rem !important;
            font-weight: 600 !important;
            color: #2c3e50 !important;
        }
        
        .swal2-content {
            font-size: 1rem !important;
            color: #34495e !important;
        }
        
        .swal2-confirm {
            background: linear-gradient(135deg, #007bff, #0056b3) !important;
            border-radius: 25px !important;
            padding: 12px 30px !important;
            font-weight: 500 !important;
            box-shadow: 0 4px 15px rgba(0,123,255,0.3) !important;
            transition: all 0.3s ease !important;
        }
        
        .swal2-confirm:hover {
            transform: translateY(-2px) !important;
            box-shadow: 0 6px 20px rgba(0,123,255,0.4) !important;
        }
        
        .swal2-icon {
            margin: 1.5rem auto 1rem !important;
        }
        
        .swal2-icon.swal2-success {
            border-color: #28a745 !important;
        }
        
        .swal2-icon.swal2-error {
            border-color: #dc3545 !important;
        }
        
        .swal2-icon.swal2-warning {
            border-color: #ffc107 !important;
        }
        
        .swal2-icon.swal2-info {
            border-color: #17a2b8 !important;
        }
        
        /* Toast notification styles */
        .swal2-toast {
            background: linear-gradient(135deg, #28a745, #20c997) !important;
            color: white !important;
            border-radius: 10px !important;
            box-shadow: 0 8px 25px rgba(40,167,69,0.3) !important;
            padding: 1rem !important;
            min-width: 300px !important;
        }
        
        .swal2-toast .swal2-title {
            color: white !important;
            font-size: 1.2rem !important;
        }
        
        .swal2-toast .swal2-content {
            color: rgba(255,255,255,0.9) !important;
            font-size: 0.9rem !important;
        }
        
        /* Error popup styles */
        .swal2-error-popup {
            background: linear-gradient(135deg, #fff5f5, #fff) !important;
            border: 2px solid #dc3545 !important;
        }
        
        .swal2-error-popup .swal2-title {
            color: #dc3545 !important;
        }
        
        .swal2-error-popup .swal2-content {
            color: #6c757d !important;
        }
        
        /* Timer progress bar */
        .swal2-timer-progress-bar {
            background: linear-gradient(90deg, #007bff, #28a745) !important;
        }
    </style>
    {% block extra_css %}{% endblock %}
    
</head>
<body class="hold-transition sidebar-mini">
    <div class="wrapper">
        <!-- Navbar -->
        <nav class="main-header navbar navbar-expand navbar-white navbar-light">
            <!-- Left navbar links -->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
                </li>
            </ul>

            <!-- Right navbar links -->
            <ul class="navbar-nav ml-auto">
                <!-- User Menu -->
                <li class="nav-item dropdown">
                    <a class="nav-link" data-toggle="dropdown" href="#">
                        <i class="far fa-user"></i> {{ request.user.username }}
                    </a>
                    <div class="dropdown-menu dropdown-menu-right">
                        <a href="{% url 'logout' %}" class="dropdown-item">
                            <i class="fas fa-sign-out-alt mr-2"></i> Cerrar Sesión
                        </a>
                    </div>
                </li>
            </ul>
        </nav>

        <!-- Main Sidebar Container -->
        <aside class="main-sidebar sidebar-dark-primary elevation-4">
            <!-- Brand Logo -->
            <a href="/" class="brand-link">
                <img src="/static/img/AdminLTELogo.png" alt="AppTurnos Logo" class="brand-image img-circle elevation-3" style="opacity: .8">
                <span class="brand-text font-weight-light">AppTurnos</span>
            </a>

            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Sidebar Menu -->
                <nav class="mt-2">
                    <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu">
                        <li class="nav-item">
                            <a href="{% url 'dashboard' %}" class="nav-link">
                                <i class="nav-icon fas fa-tachometer-alt"></i>
                                <p>Dashboard</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'mis_turnos' %}" class="nav-link">
                                <i class="nav-icon far fa-calendar-alt"></i>
                                <p>Mis Turnos / Mi Calendario</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'solicitudes:solicitudes' %}" class="nav-link">
                                <i class="nav-icon fas fa-bell"></i>
                                <p>
                                    Notificaciones / Solicitudes
                                    {% if user.is_authenticated and user.empleado %}
                                        {% with notificaciones_count=user.empleado.notificaciones_no_leidas_count %}
                                            {% if notificaciones_count > 0 %}
                                                <span class="badge badge-warning right">{{ notificaciones_count }}</span>
                                            {% endif %}
                                        {% endwith %}
                                    {% endif %}
                                </p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'solicitudes:cambio_turno_inicio' %}" class="nav-link">
                                <i class="nav-icon fas fa-exchange-alt"></i>
                                <p>Cambios de Turno</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'consolidado_horas' %}" class="nav-link">
                                <i class="nav-icon fas fa-clock"></i>
                                <p>Consolidado de Horas</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'permisos_especiales_list' %}" class="nav-link">
                                <i class="nav-icon fas fa-calendar-check"></i>
                                <p>Permisos Especiales</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'beneficios' %}" class="nav-link">
                                <i class="nav-icon fas fa-gift"></i>
                                <p>Beneficios Utilizados</p>
                            </a>
                        </li>
            
                        <li class="nav-item">
                            <a href="{% url 'solicitudes:permisodetalle_list' %}" class="nav-link">
                                <i class="nav-icon fas fa-clock"></i>
                                <p>Permisos Detalle</p>
                            </a>
                        </li>
                        
                        <!-- Ítems visibles para todos -->
                        <li class="nav-header">CONSULTAS RÁPIDAS</li>
                        <li class="nav-item">
                            <a href="{% url 'pdh_visualizar' %}" class="nav-link">
                                <i class="nav-icon fas fa-dollar-sign"></i>
                                <p>PDH</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'sanciones_visualizar' %}" class="nav-link">
                                <i class="nav-icon fas fa-gavel"></i>
                                <p>Sanciones</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'restricciones_visualizar' %}" class="nav-link">
                                <i class="nav-icon fas fa-ban"></i>
                                <p>Restricciones</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'dias_especiales_visualizar' %}" class="nav-link">
                                <i class="nav-icon fas fa-star"></i>
                                <p>Días Especiales</p>
                            </a>
                        </li>
                        
                        
                        <!-- Admin Section -->
                        {% if user.is_staff %}
                        <li class="nav-header">ADMINISTRACIÓN</li>
                        <li class="nav-item">
                            <a href="{% url 'empleados' %}" class="nav-link">
                                <i class="nav-icon fas fa-users"></i>
                                <p>Empleados/Exploradores</p>
                            </a>
                        </li>

                        <li class="nav-item">
                            <a href="{% url 'solicitudes:tiposolicitudcambio_list' %}" class="nav-link">
                                <i class="nav-icon fas fa-random"></i>
                                <p>Tipos de Solicitud</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'salas_list' %}" class="nav-link">
                                <i class="nav-icon fas fa-sitemap"></i>
                                <p>Salas</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'turnos_list' %}" class="nav-link">
                                <i class="nav-icon fas fa-calendar-day"></i>
                                <p>Turnos</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'jornadas_list' %}" class="nav-link">
                                <i class="nav-icon fas fa-calendar-alt"></i>
                                <p>Jornadas</p>
                            </a>
                        </li>

                        <li class="nav-item">
                            <a href="{% url 'pdh_list' %}" class="nav-link">
                                <i class="nav-icon fas fa-dollar-sign"></i>
                                <p>PDH</p>
                            </a>
                        </li>

                        <li class="nav-item">
                            <a href="{% url 'sanciones_list' %}" class="nav-link">
                                <i class="nav-icon fas fa-gavel"></i>
                                <p>Sanciones</p>
                            </a>
                        </li>
                        
                        <li class="nav-item">
                            <a href="{% url 'restricciones_list' %}" class="nav-link">
                                <i class="nav-icon fas fa-ban"></i>
                                <p>Restricciones</p>
                            </a>
                        </li>
                        
                        <li class="nav-item">
                            <a href="{% url 'roles_list' %}" class="nav-link">
                                <i class="nav-icon fas fa-user-tag"></i>
                                <p>Roles y Permisos</p>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="{% url 'dias_especiales_list' %}" class="nav-link">
                                <i class="nav-icon fas fa-star"></i>
                                <p>Días Especiales</p>
                            </a>
                        </li>
                        {% endif %}
                    </ul>
                </nav>
            </div>
        </aside>

        <!-- Content Wrapper. Contains page content -->
        <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            <section class="content-header">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <h1>{% block page_title %}{% endblock %}</h1>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Main content -->
            <section class="content">
                <div class="container-fluid">
                    {% block content %}{% endblock %}
                </div>
            </section>
        </div>

        <footer class="main-footer">
            <div class="float-right d-none d-sm-block">
                <b>Version</b> 1.0.0
            </div>
            <strong>Copyright &copy; 2024 AppTurnos.</strong> Todos los derechos reservados.
        </footer>
    </div>

    <!-- jQuery -->
    <script src="/static/plugins/jquery/jquery.min.js"></script>
    <!-- Bootstrap 4 -->
    <script src="/static/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- SweetAlert2 -->
    <script src="/static/plugins/sweetalert2/sweetalert2.min.js"></script>
    <!-- AdminLTE App -->
    <script src="/static/js/adminlte.min.js"></script>
    {% block extra_js %}{% endblock %}
</body>
</html> 