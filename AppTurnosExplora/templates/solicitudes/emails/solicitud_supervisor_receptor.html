<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Solicitud de Cambio de Turno - Rol Doble</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .header { background: linear-gradient(135deg, #007bff, #28a745); color: white; padding: 20px; text-align: center; }
        .content { padding: 20px; background-color: #f8f9fa; }
        .details { background-color: white; padding: 15px; margin: 15px 0; border-left: 4px solid #007bff; }
        .footer { text-align: center; padding: 20px; color: #666; font-size: 12px; }
        .button { display: inline-block; padding: 10px 20px; background-color: #007bff; color: white; text-decoration: none; border-radius: 5px; }
        .alert { background-color: #fff3cd; border: 1px solid #ffeaa7; color: #856404; padding: 15px; border-radius: 5px; margin: 15px 0; }
        .role-section { background-color: #e9ecef; padding: 15px; margin: 15px 0; border-radius: 5px; }
        .role-title { font-weight: bold; color: #495057; margin-bottom: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üë®‚Äçüíº SUPERVISOR + ü§ù COMPA√ëERO - Solicitud de Cambio de Turno</h1>
            <h3>Rol Doble - Supervisor + Receptor</h3>
        </div>
        
        <div class="content">
            <p>Hola <strong>SUPERVISOR {{ supervisor_receptor.nombre|upper }} {{ supervisor_receptor.apellido|upper }}</strong>,</p>
            
            <div class="alert">
                <strong>‚ö†Ô∏è Importante:</strong> Has recibido una solicitud de cambio de turno donde eres tanto el <strong>SUPERVISOR</strong> como el <strong>COMPA√ëERO RECEPTOR</strong>.
            </div>
            
            <p>Como eres tanto el <strong>SUPERVISOR</strong> de <strong>{{ solicitud.explorador_solicitante.nombre|upper }} {{ solicitud.explorador_solicitante.apellido|upper }}</strong> como el <strong>COMPA√ëERO RECEPTOR</strong> de esta solicitud, necesitas aprobar en ambos roles.</p>
            
            <div class="details">
                <h3>üìã Detalles de la Solicitud:</h3>
                <ul>
                    <li><strong>Solicitante:</strong> {{ solicitud.explorador_solicitante.nombre }} {{ solicitud.explorador_solicitante.apellido }}</li>
                    <li><strong>Receptor:</strong> {{ supervisor_receptor.nombre }} {{ supervisor_receptor.apellido }} (T√∫)</li>
                    <li><strong>Tipo de Solicitud:</strong> {{ solicitud.tipo_cambio.nombre }}</li>
                    <li><strong>Fecha de Solicitud:</strong> {{ solicitud.fecha_solicitud|date:"d/m/Y H:i" }}</li>
                    <li><strong>Fecha de Cambio:</strong> 
                        {% if solicitud.tipo_cambio.nombre == "CT PERMANENTE" and solicitud.cambio_permanente %}
                            {{ solicitud.cambio_permanente.fecha_inicio|date:"d/m/Y" }}
                            {% if solicitud.cambio_permanente.fecha_fin %}
                                - {{ solicitud.cambio_permanente.fecha_fin|date:"d/m/Y" }}
                            {% else %}
                                - (sin fecha fin)
                            {% endif %}
                        {% elif solicitud.fecha_cambio_turno %}
                            {{ solicitud.fecha_cambio_turno|date:"d/m/Y" }}
                        {% else %}
                            No aplica
                        {% endif %}
                    </li>
                    {% if solicitud.comentario %}
                    <li><strong>Comentario:</strong> {{ solicitud.comentario }}</li>
                    {% endif %}
                </ul>
            </div>
            
            <div class="role-section">
                <div class="role-title">üë®‚Äçüíº Como SUPERVISOR {{ supervisor_receptor.nombre|upper }} {{ supervisor_receptor.apellido|upper }}:</div>
                <p>Debes aprobar/rechazar la solicitud desde tu rol de supervisor.</p>
                <div style="text-align: center; margin: 15px 0;">
                    <a href="{{ enlaces.supervisor.aprobar }}" style="display: inline-block; padding: 12px 24px; background-color: #28a745; color: white; text-decoration: none; border-radius: 5px; margin: 0 5px;">
                        ‚úÖ Aprobar como Supervisor
                    </a>
                    <a href="{{ enlaces.supervisor.rechazar }}" style="display: inline-block; padding: 12px 24px; background-color: #dc3545; color: white; text-decoration: none; border-radius: 5px; margin: 0 5px;">
                        ‚ùå Rechazar como Supervisor
                    </a>
                </div>
            </div>
            
            <div class="role-section">
                <div class="role-title">ü§ù Como COMPA√ëERO RECEPTOR {{ supervisor_receptor.nombre|upper }} {{ supervisor_receptor.apellido|upper }}:</div>
                <p>Tambi√©n debes aprobar/rechazar la solicitud desde tu rol de receptor.</p>
                <div style="text-align: center; margin: 15px 0;">
                    <a href="{{ enlaces.receptor.aprobar }}" style="display: inline-block; padding: 12px 24px; background-color: #28a745; color: white; text-decoration: none; border-radius: 5px; margin: 0 5px;">
                        ‚úÖ Aprobar como Receptor
                    </a>
                    <a href="{{ enlaces.receptor.rechazar }}" style="display: inline-block; padding: 12px 24px; background-color: #dc3545; color: white; text-decoration: none; border-radius: 5px; margin: 0 5px;">
                        ‚ùå Rechazar como Receptor
                    </a>
                </div>
            </div>
            
            <div class="alert">
                <h4>üìù Nota Importante:</h4>
                <p>Para que la solicitud sea aprobada completamente, necesitas aprobar desde AMBOS roles. Si rechazas desde cualquiera de los dos roles, la solicitud ser√° rechazada.</p>
            </div>
            
            <p style="text-align: center; margin: 30px 0;">
                <a href="http://127.0.0.1:8000/solicitudes/" class="button">Ver en el Sistema</a>
            </p>
        </div>
        
        <div class="footer">
            <p>Este es un mensaje autom√°tico del sistema AppTurnos.</p>
            <p>No respondas a este email. Para consultas, contacta al administrador del sistema.</p>
        </div>
    </div>
</body>
</html> 